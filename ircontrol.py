## Writen By Nirmal Kushwah V0.1 ##
import serial
import time
import threading
import json 
#from req_handler  import *
from main import *


with open('airtel.json') as driver_file:
        driverdata = json.load(driver_file)
driverdata['channel_num_list']

serialport = driverdata['port']
baudrate = driverdata['baudrate']
ser= serial.Serial(serialport, baudrate, timeout=1)
def make_ser_conn():
    print(ser.write(b"C")) 
    print(ser.write(b"OR0444022215"))
def func():
    while True:
        #global conn
        #conn
        reading = ser.read(1024).decode('utf-8')
        a = ""
        for i in reading:
            if i != ">":
                a = a + i
            else:
                #conn.send(str.encode(a +"\n"))
                print(a +"\n")
                a = ""
            #print("\r\n")


def ser_Connect(comm):
        #s = [0x00,0x00,0x00,0x73,0x00,0x00,0x00,0x12,0x00,0x0F,0x00,0x0A,0x00,0x06,0x00,0x0A,0x00,0x06,0x00,0x16,0x00,0x06,0x00,0x10,0x00,0x06,0x00,0x16,0x00,0x06,0x00,0x0A,0x00,0x06,0x00,0x0A,0x00,0x06,0x00,0x0A,0x00,0x06,0x00,0x0A,0x00,0x06,0x00,0x0A,0x00,0x06,0x00,0x16,0x00,0x06,0x00,0x10,0x00,0x06,0x00,0x1C,0x00,0x06,0x00,0x0A,0x00,0x06,0x00,0x0A,0x00,0x06,0x00,0x1C,0x00,0x06,0x00,0x0A,0x00,0x06,0x0D,0xAC]
        global ser
        ser.write(serial.to_bytes(comm))
        #return ser.read(40)

#   t1 = threading.Thread(target=func)
#t1.daemon = True
#t1.start()


